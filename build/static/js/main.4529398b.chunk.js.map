{"version":3,"sources":["components/Guard/Guard.tsx","components/Spinner/Spinner.tsx","components/Launch/Launch.tsx","shared/noop.ts","shared/go.ts","store/index.ts","store/RXStore.ts","services/auth.service.ts","shared/useCurrentUser.ts","components/Button/Button.tsx","components/Avatar/Avatar.tsx","components/Logo/Logo.tsx","components/AppBar/AppBar.tsx","shared/classnames.ts","components/Card/CardFooter.tsx","components/Card/Card.tsx","components/Card/Card.service.ts","components/DetectionArea/DetectionArea.tsx","components/DetectionArea/DetectionArea.service.ts","services/projects.service.ts","config.ts","shared/http.ts","shared/qs.ts","pages/Dashboard/Dashboard.service.ts","components/TextInput/TextInput.tsx","components/LoginForm/LoginForm.tsx","components/APIWidget/APIWidget.tsx","components/ProjectInfo/ProjectInfo.tsx","components/ResourceWidget/ResourceWidget.tsx","components/SQLWidget/SQLWidget.tsx","pages/Dashboard/WidgetSwitcher.tsx","pages/Dashboard/Dashboard.tsx","pages/Login/Login.tsx","components/Alert/Alert.tsx","pages/NewProject/NewProject.tsx","App.tsx","shared/useAuthConfig.ts","serviceWorker.ts","index.tsx"],"names":["Guard","redirectTo","guard","children","rest","useState","isRedirecting","setRedirectStatus","canAccess","setAccess","useEffect","sub","res","Promise","then","s","catch","e","finally","subscribe","unsubscribe","render","location","to","pathname","state","from","Spinner","className","cls","join","style","rotate","animationDuration","animationTimingFunction","animationIterationCount","animationName","Launch","noop","Err","console","error","go","promise","storeInstance","initialState","actions$","BehaviorSubject","state$","pipe","scan","action","shareReplay","createReducer","fn","next","selectCreator","predict","defaultValue","undefined","Error","mapFn","attr","attrs","split","p","shift","map","distinctUntilChanged","clear","field","ns","Reflect","deleteProperty","select","createStore","group","log","groupEnd","store","Actions","setUserInfo","userInfo","setSession","session","username","password","a","Auth","signIn","currentUserInfo","currentSession","signOut","email","signUp","attributes","code","confirmSignUp","Auth$","getSession","switchMap","of","getUserInfo","tap","data","useCurrentUser","loading","setLoading","user","setUser","Button","primary","block","disabled","onClick","defaultCls","push","isDisabled","featureCls","Avatar","visible","setVisible","onLogout","Logo","reverse","AppBar","projectId","projects","onProjectChange","history","useHistory","isNewProjectPath","useRouteMatch","path","isLoggedIn","length","value","onChange","target","project","key","id","projectName","classnames","args","Array","r","composeCls","result","restArgs","isArray","c","filter","Boolean","Object","entries","reduce","acc","val","CardFooter","link","href","rel","Placeholder","Card","React","memo","title","footer","isDragging","collapse","onPositionChange","onMouseDown","ref","useRef","position","setPosition","useLayoutEffect","current","move","el","x","offsetWidth","y","offsetHeight","left","clientX","top","clientY","document","addEventListener","removeEventListener","usePosition","name","DetectionArea","index","active","useMemo","offsetTop","offsetLeft","width","height","useActive","WidgetTypes","CONFIG","REGION","USER_POOL_ID","APP_CLIENT_ID","URL","ENV","errorHandler","errorHandlerWithDefaultValue","genURL","env","base","request","opt","token$","getIdToken","getJwtToken","take","opt$","token","headers","restOpts","Headers","append","url","Authorization","fetch","status","json","throwError","username$","pluck","updateProjectResourcesById","resources","method","body","JSON","stringify","catchError","EMPTY","qs","q","startsWith","substr","cur","useProject","setProject","Item","getProjectById","useProjects","setProjects","Items","Type","TextInput","label","props","APIWidget","edit","source","ProjectInfo","Date","createdAt","toDateString","ResourceWidget","SQLWidget","WidgetSwitcher","type","View","Resource","API","SQL","Dashboard","cb","loadingProjects","search","useLocation","useProjectId","setDragging","operateItemIndex","setOperateItemIndex","targetIndex","setTargetIndex","setResources","useResources","setEdit","cancelDragging","useCallback","newResources","list","srcIndex","listCopy","slice","srcCol","srcIdx","targetCol","targetIdx","col","item","splice","srcCols","targetCols","exchange","onIndexChange","onDataChange","resource","colIndex","b","config","LoginForm","Login","setType","setUsername","setEmail","setPassword","isSubmitting","setSubmitting","setCode","onSignIn","alert","onSignUp","isOk","ConfirmSingUp","onConfirmed","onSubmit","preventDefault","Register","placeholder","Alert","NewProject","setProjectName","setError","errMsg","setErrMsg","trim","opts","createProject","msg","goBack","App","Amplify","configure","mandatorySignIn","region","userPoolId","userPoolWebClientId","exact","window","hostname","match","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.4529398b.chunk.js","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport {Redirect, Route, RouteProps} from 'react-router-dom'\nimport {Observable, Subscription} from 'rxjs'\nimport {CProps} from '../../types'\n\ninterface GuardProps extends RouteProps {\n  redirectTo?: string\n  guard: () => boolean | Observable<boolean> | Promise<boolean>\n}\n\nexport const Guard = ({\n  redirectTo = '/login',\n  guard,\n  children,\n  ...rest\n}: CProps<GuardProps>) => {\n  const [isRedirecting, setRedirectStatus] = useState(true)\n  const [canAccess, setAccess] = useState(false)\n\n  useEffect(() => {\n    const res = guard()\n    let sub: Subscription\n\n    if (typeof res === 'boolean') {\n      setAccess(res)\n      setRedirectStatus(false)\n    } else if (res instanceof Promise) {\n      res\n        .then(s => setAccess(s))\n        .catch(e => setAccess(false))\n        .finally(() => setRedirectStatus(false))\n    } else {\n      sub = res.subscribe(\n        s => {\n          setAccess(s)\n        },\n        () => setAccess(false),\n        () => setRedirectStatus(false)\n      )\n    }\n\n    return () => {\n      if (sub) {\n        sub.unsubscribe()\n      }\n    }\n  }, [guard])\n\n  if (isRedirecting) {\n    return null\n  }\n\n  return (\n    <Route\n      {...rest}\n      render={({location}) =>\n        canAccess ? (\n          children\n        ) : (\n          <Redirect to={{pathname: redirectTo, state: {from: location}}} />\n        )\n      }\n    />\n  )\n}\n","import React from 'react'\nimport {FaSpinner} from 'react-icons/fa'\nimport {CProps} from '../../types'\n\ninterface SpinnerProps {}\n\nexport const Spinner = ({className = ''}: CProps<SpinnerProps>) => {\n  const cls = ['inline-flex', className].join(' ')\n\n  return (\n    <>\n      <span className={cls} style={style.rotate}>\n        <FaSpinner className=\"w-full h-full\" />\n      </span>\n\n      <style>{`\n      @keyframes Spinner {\n        0 {\n          transform: rotate(0);\n        }\n        25% {\n          transform: rotate(80deg);\n        }\n        50% {\n          transform: rotate(160deg);\n        }\n        75% {\n          transform: rotate(240deg);\n        }\n        100% {\n          transform: rotate(360deg);\n        }\n      }\n      `}</style>\n    </>\n  )\n}\n\nconst style = {\n  rotate: {\n    animationDuration: '1s',\n    animationTimingFunction: 'linear',\n    animationIterationCount: 'infinite',\n    animationName: 'Spinner'\n  }\n}\n","import React from 'react'\nimport {Spinner} from '../Spinner'\n\nexport const Launch = () => {\n  return (\n    <div className=\"flex justify-center items-center h-full w-full\">\n      <Spinner className=\"w-20 h-20\" />\n    </div>\n  )\n}\n","export const noop = () => {}\n","export class Err {\n  constructor(public e: any) {\n    console.error(e)\n  }\n}\n\nexport function go<T>(promise: Promise<T>): Promise<T | Err> {\n  return promise.catch(e => new Err(e))\n}\n","import {createStore} from './RXStore'\n\nconst storeInstance = createStore()\n\nstoreInstance.state$.subscribe(state => {\n  console.group('Store')\n  console.log(state)\n  console.groupEnd()\n})\n\nexport const store = storeInstance\n","import {BehaviorSubject, Observable} from 'rxjs'\nimport {distinctUntilChanged, map, scan, shareReplay} from 'rxjs/operators'\n\nexport type ReducerFn<S> = (s: S) => S\n\ntype State = {[key: string]: any} | null\ntype MapFn = <T, R>(s: T) => R | undefined\n\nexport function createStore(initialState: State = {}) {\n  const actions$ = new BehaviorSubject<ReducerFn<any>>(s => s)\n\n  const state$ = actions$.pipe(\n    scan((state, action) => action(state), initialState),\n    shareReplay(1)\n  )\n\n  const createReducer = <S extends State>(fn: ReducerFn<S>) => {\n    actions$.next(fn)\n  }\n\n  const selectCreator = (state$: Observable<State>) => <S>(\n    predict: string | MapFn,\n    defaultValue?: S\n  ): Observable<S> => {\n    // eslint-disable-next-line\n    if (predict == undefined) {\n      throw new Error('missing \\'predict\\' parameter in select\\' method!')\n    }\n\n    let mapFn = predict as MapFn\n\n    if (typeof predict === 'string') {\n      // @ts-ignore\n      mapFn = (state: State): S | undefined => {\n        const attrs = predict.split('.')\n        let p = state\n        let attr\n\n        while (p !== null && (attr = attrs.shift()) !== undefined) {\n          p = p[attr]\n\n          if (p === undefined) {\n            return defaultValue\n          }\n        }\n\n        return p as S\n      }\n    }\n\n    // @ts-ignore\n    return state$.pipe(map(mapFn), distinctUntilChanged())\n  }\n\n  const clear = (field?: string) => {\n    createReducer(state => {\n      const ns = {...state}\n\n      if (field) {\n        Reflect.deleteProperty(ns, field)\n        return ns\n      }\n\n      return initialState\n    })\n  }\n\n  return {\n    state$,\n    select: selectCreator(state$),\n    createReducer,\n    clear\n  }\n}\n","import {CognitoUserSession} from 'amazon-cognito-identity-js'\nimport {Auth} from 'aws-amplify'\nimport {from, of} from 'rxjs'\nimport {switchMap, tap} from 'rxjs/operators'\nimport {Err, go} from '../shared/go'\nimport {store} from '../store'\n\nconst Actions = {\n  userInfo: 'userInfo',\n  session: 'session'\n}\n\ninterface IUserInfo {\n  id?: string\n  username: string\n  attributes: {\n    email?: string\n  }\n}\n\nexport type UserInfo = IUserInfo | null\n\nfunction getUserInfo() {\n  return store.select<UserInfo>(Actions.userInfo, null).pipe(\n    switchMap(userInfo =>\n      userInfo === null\n        ? from(Auth.currentUserInfo()).pipe(\n            tap(data => {\n              if (data !== null) {\n                setUserInfo(data)\n              }\n            })\n          )\n        : of(userInfo)\n    )\n  )\n}\n\nfunction setUserInfo(userInfo: UserInfo) {\n  store.createReducer(state => ({\n    ...state,\n    [Actions.userInfo]: userInfo\n  }))\n}\n\nfunction getSession() {\n  return store.select<CognitoUserSession>(Actions.session).pipe(\n    switchMap(session =>\n      session\n        ? of(session)\n        : from(\n            Auth.currentSession().then(session => {\n              if (session) {\n                setSession(session)\n              }\n              return session\n            })\n          )\n    )\n  )\n}\n\nfunction setSession(session: CognitoUserSession) {\n  store.createReducer(state => ({\n    ...state,\n    [Actions.session]: session\n  }))\n}\n\nasync function signIn(username: string, password: string): Promise<UserInfo> {\n  const res = await go(\n    Auth.signIn({\n      username,\n      password\n    })\n  )\n\n  if (res instanceof Err) {\n    console.error('Login failed.\\n', res.e)\n\n    setUserInfo(null)\n\n    return null\n  }\n\n  const userInfo = await Auth.currentUserInfo()\n  const session = await Auth.currentSession()\n\n  setUserInfo(userInfo)\n  setSession(session)\n\n  return userInfo\n}\n\nasync function signOut(): Promise<boolean> {\n  const res = await go(Auth.signOut())\n\n  if (res instanceof Err) {\n    console.error('Logout failed.\\n', res.e)\n\n    return false\n  }\n\n  setUserInfo(null)\n\n  return true\n}\n\nasync function signUp(\n  username: string,\n  password: string,\n  email: string\n): Promise<boolean> {\n  const res = await go(\n    Auth.signUp({\n      username,\n      password,\n      attributes: {\n        email: email\n      }\n    })\n  )\n\n  if (res instanceof Err) {\n    console.error('Sign up failed.\\n', res.e)\n\n    return false\n  }\n\n  return true\n}\n\nasync function confirmSignUp(username: string, code: string): Promise<boolean> {\n  const res = await go(Auth.confirmSignUp(username, code))\n\n  if (res instanceof Err) {\n    console.error('Confirmed failed.\\n', res.e)\n\n    return false\n  }\n\n  return true\n}\n\nexport const Auth$ = {\n  getSession,\n  getUserInfo,\n  signIn,\n  signUp,\n  signOut,\n  confirmSignUp\n}\n","import {useEffect, useState} from 'react'\nimport {Auth$, UserInfo} from '../services/auth.service'\n\nexport function useCurrentUser() {\n  const [loading, setLoading] = useState(true)\n  const [user, setUser] = useState<UserInfo>(null)\n\n  useEffect(() => {\n    const sub = Auth$.getUserInfo().subscribe(userInfo => {\n      setUser(userInfo)\n      setLoading(false)\n    })\n\n    return () => sub.unsubscribe()\n  }, [])\n\n  return {loading, user}\n}\n","import React, {ButtonHTMLAttributes, MouseEventHandler} from 'react'\nimport {noop} from '../../shared/noop'\nimport {CProps} from '../../types'\nimport {Spinner} from '../Spinner'\n\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  primary?: boolean\n  block?: boolean\n  loading?: boolean\n  disabled?: boolean\n  onClick?: MouseEventHandler<HTMLButtonElement>\n}\n\nexport const Button = ({\n  primary = false,\n  block = false,\n  className = '',\n  loading = false,\n  disabled = false,\n  onClick = noop,\n  children,\n  ...rest\n}: CProps<ButtonProps>) => {\n  const defaultCls = [\n    'px-3',\n    'py-2',\n    'rounded',\n    'transition-colors',\n    'duration-300',\n    'ease-in-out',\n    'focus:outline-none'\n  ]\n\n  if (block) {\n    defaultCls.push('w-full')\n  }\n\n  const isDisabled = disabled || loading\n\n  const featureCls = primary\n    ? [\n        'text-white',\n        isDisabled ? 'bg-gray-400' : 'bg-blue-500',\n        isDisabled ? '' : 'hover:bg-blue-800'\n      ]\n    : [\n        isDisabled ? 'text-gray-400' : 'text-blue-500',\n        isDisabled ? 'border-gray-400' : 'border-blue-500',\n        isDisabled ? '' : 'hover:border-blue-800',\n        isDisabled ? '' : 'hover:text-blue-800'\n      ]\n\n  if (disabled || loading) {\n    featureCls.push('cursor-not-allowed')\n  }\n\n  const cls = [...defaultCls, ...featureCls, className].join(' ')\n\n  return (\n    <button className={cls} disabled={isDisabled} onClick={onClick} {...rest}>\n      <div className={loading ? 'flex items-center justify-center' : ''}>\n        <span className=\"flex mr-2\">{loading && <Spinner />}</span>\n        {children}\n      </div>\n    </button>\n  )\n}\n","import React, {useState} from 'react'\nimport {MdPerson} from 'react-icons/md'\nimport {Auth$, UserInfo} from '../../services/auth.service'\nimport {CProps} from '../../types'\nimport {Button} from '../Button'\n\ninterface AvatarProps {\n  user: UserInfo\n}\n\nexport const Avatar = ({user}: CProps<AvatarProps>) => {\n  const [visible, setVisible] = useState(false)\n\n  const onOpenMenu = () => setVisible(!visible)\n\n  const onLogout = async () => Auth$.signOut()\n\n  if (!user) {\n    return <div>Login</div>\n  }\n\n  return (\n    <>\n      <div\n        className=\"border cursor-pointer p-2 rounded-full text-white hover:bg-blue-800\"\n        onClick={onOpenMenu}\n      >\n        <MdPerson className=\"text-xl\" />\n      </div>\n\n      {visible && (\n        <div className=\"absolute bg-white content-between mr-2 mt-12 right-0 shadow-md top-0 w-64\">\n          <div className=\"flex p-3\">\n            <MdPerson className=\"text-3xl text-6xl text-gray-800\" />\n\n            <div className=\"ml-4\">\n              <h1 className=\"font-bold\">{user.username}</h1>\n              <h2 className=\"text-base\">{user.attributes.email}</h2>\n            </div>\n          </div>\n\n          <div className=\"bg-gray-200 border-t p-2 text-right\">\n            <Button primary onClick={onLogout}>\n              Logout\n            </Button>\n          </div>\n        </div>\n      )}\n    </>\n  )\n}\n","import React from 'react'\nimport {MdCloud} from 'react-icons/md'\nimport {Link} from 'react-router-dom'\nimport {CProps} from '../../types'\n\ninterface LogoProps {\n  reverse?: boolean\n}\n\nexport const Logo = ({reverse = false}: CProps<LogoProps>) => {\n  const cls = [\n    'flex items-center text-3xl cursor-pointer',\n    reverse ? 'text-white' : 'text-blue-500'\n  ].join(' ')\n\n  return (\n    <Link to=\"/\">\n      <h1 className={cls}>\n        <MdCloud className=\"mr-2\" />\n        Cloud dashboard\n      </h1>\n    </Link>\n  )\n}\n","import React from 'react'\nimport {MdAddCircle} from 'react-icons/md'\nimport {useHistory, useRouteMatch} from 'react-router-dom'\nimport {Project} from '../../services/projects.service'\nimport {noop} from '../../shared/noop'\nimport {useCurrentUser} from '../../shared/useCurrentUser'\nimport {CProps} from '../../types'\nimport {Avatar} from '../Avatar'\nimport {Button} from '../Button'\nimport {Logo} from '../Logo'\n\ninterface AppBarProps {\n  projectId?: string\n  projects?: Project[]\n  onProjectChange?: (projectId: string) => void\n}\n\nexport const AppBar = ({\n  projectId,\n  projects = [],\n  onProjectChange = noop,\n  children\n}: CProps<AppBarProps>) => {\n  const {user} = useCurrentUser()\n  const history = useHistory()\n  const match = useRouteMatch()\n\n  const isNewProjectPath = match.path === '/new-project'\n\n  const onCreateProject = () => history.push('/new-project')\n\n  const isLoggedIn = user !== null\n\n  return (\n    <div>\n      <div className=\"py-1 px-4 shadow bg-blue-500 flex justify-between items-center fixed w-full\">\n        <div className=\"flex items-center\">\n          <Logo reverse />\n\n          {projects.length > 0 && (\n            <div className=\"ml-6\">\n              <select\n                className=\"bg-blue-500 border h-8 px-2 rounded text-white w-48\"\n                value={projectId}\n                onChange={e => onProjectChange(e.target.value)}\n              >\n                {projects.map(project => (\n                  <option key={project.id} value={project.id}>\n                    {project.projectName}\n                  </option>\n                ))}\n              </select>\n            </div>\n          )}\n        </div>\n\n        {isLoggedIn && (\n          <div className=\"flex items-center\">\n            {!isNewProjectPath && (\n              <Button\n                primary\n                className=\"mr-8 text-white\"\n                onClick={onCreateProject}\n              >\n                <div className=\"flex items-center\">\n                  <MdAddCircle className=\"mr-1\" />\n                  New project\n                </div>\n              </Button>\n            )}\n\n            {user && <Avatar user={user} />}\n          </div>\n        )}\n      </div>\n\n      <div className=\"overflow-y-auto pt-12\">{children}</div>\n    </div>\n  )\n}\n","export function classnames(\n  ...cls: Array<string | string[] | {[key: string]: boolean}>\n): string {\n  const args = Array.from(cls)\n\n  const r: string[] = []\n\n  composeCls(args, r)\n\n  return r.join(' ')\n}\n\nfunction composeCls(args: any[], result: string[]) {\n  if (args.length === 0) {\n    return\n  }\n\n  const [cls, ...restArgs] = args\n\n  if (typeof cls === 'string') {\n    result.push(cls)\n  } else if (Array.isArray(cls)) {\n    const c = cls.filter(Boolean).join(' ')\n    result.push(c)\n  } else {\n    const c = Object.entries<boolean>(cls)\n      .reduce((acc, [key, val]) => [...acc, val ? key : ''], [] as any)\n      .filter(Boolean)\n      .join(' ')\n\n    result.push(c)\n  }\n\n  composeCls(restArgs, result)\n}\n","import React from 'react'\nimport {MdArrowForward} from 'react-icons/md'\nimport {CProps} from '../../types'\n\ninterface CardFooterProps {\n  link?: string\n}\n\nexport const CardFooter = ({link, children}: CProps<CardFooterProps>) => {\n  return (\n    <a\n      href={link}\n      className=\"block border-t h-full w-full p-4 hover:bg-gray-100 transition-colors duration-300 ease-in-out\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      <div className=\"flex items-center\">\n        <MdArrowForward className=\"mr-4 text-2xl\" />\n        {children}\n      </div>\n    </a>\n  )\n}\n","import React, {MouseEventHandler, useEffect, useRef} from 'react'\nimport {WidgetConfig} from '../../services/projects.service'\nimport {classnames} from '../../shared/classnames'\nimport {noop} from '../../shared/noop'\nimport {CProps, Pos} from '../../types'\nimport {usePosition} from './Card.service'\nimport {CardFooter} from './CardFooter'\n\ninterface CardProps {\n  title: string\n  footer?: WidgetConfig\n  isDragging?: boolean\n  collapse?: boolean\n  onPositionChange?: (position: Pos) => void\n  onMouseDown?: MouseEventHandler<HTMLDivElement>\n}\n\nconst Placeholder = () => (\n  <div className=\"border bg-white w-full h-16 shadow-inner mb-3\" />\n)\n\nexport const Card = React.memo(\n  ({\n    title,\n    footer,\n    isDragging = false,\n    collapse = false,\n    className = '',\n    onPositionChange = noop,\n    onMouseDown = noop,\n    children\n  }: CProps<CardProps>) => {\n    const ref = useRef<HTMLDivElement>(null)\n    const position = usePosition(ref, isDragging)\n\n    useEffect(() => {\n      onPositionChange(position)\n    }, [position])\n\n    return (\n      <>\n        {isDragging && <Placeholder />}\n\n        <div\n          ref={ref}\n          className={classnames(\n            'bg-white duration-300 ease-in-out hover:shadow-lg overflow-hidden shadow-md transition-shadow select-none',\n            className,\n            {'absolute w-1/3 z-10 opacity-75': isDragging}\n          )}\n        >\n          <div\n            onMouseDown={onMouseDown}\n            className={classnames(\n              'text-2xl p-4 h-16 overflow-hidden',\n              isDragging ? 'cursor-grabbing' : 'cursor-grab'\n            )}\n          >\n            {title}\n          </div>\n\n          {!collapse && (\n            <>\n              <div className=\"px-4 pb-4\">{children}</div>\n\n              {footer && (\n                <CardFooter link={footer.link}>{footer.name}</CardFooter>\n              )}\n            </>\n          )}\n        </div>\n      </>\n    )\n  }\n)\n","import {MouseEvent, RefObject, useLayoutEffect, useState} from 'react'\nimport {Pos} from '../../types'\n\nexport function usePosition(\n  ref: RefObject<HTMLDivElement>,\n  isDragging: boolean\n): Pos {\n  const [position, setPosition] = useState<Pos>([0, 0])\n\n  useLayoutEffect(() => {\n    if (!ref.current || !isDragging) {\n      return\n    }\n\n    const move = (e: MouseEvent<any>) => {\n      if (!ref.current || !isDragging) {\n        return\n      }\n\n      const el = ref.current\n\n      const x = el.offsetWidth >> 1\n      const y = el.offsetHeight >> 1\n\n      el.style.left = e.clientX - x + 'px'\n      el.style.top = e.clientY - y + 'px'\n\n      setPosition([e.clientX, e.clientY])\n    }\n\n    document.addEventListener('mousemove', move as any)\n\n    return () => document.removeEventListener('mousemove', move as any)\n  }, [ref, isDragging])\n\n  return position\n}\n","import React, {useEffect, useRef} from 'react'\nimport {classnames} from '../../shared/classnames'\nimport {CProps, Pos} from '../../types'\nimport {useActive} from './DetectionArea.service'\n\ninterface DetectionAreaProps {\n  index: Pos\n  position: Pos\n  onChange: (index: Pos) => void\n}\n\nexport function DetectionArea({\n  index,\n  position,\n  onChange\n}: CProps<DetectionAreaProps>) {\n  const ref = useRef<HTMLDivElement>(null)\n\n  const active = useActive(ref, position)\n\n  useEffect(() => {\n    // only pass the active one index\n    if (active) {\n      onChange(index)\n    }\n  }, [active])\n\n  return (\n    <div\n      ref={ref}\n      className={classnames(\n        'w-full h-1 mb-3',\n        active ? 'bg-blue-500' : 'bg-gray-200'\n      )}\n    />\n  )\n}\n","import {RefObject, useMemo} from 'react'\nimport {Pos} from '../../types'\n\nconst EDGE_DETECTION_V = 33 + 11\nconst EDGE_DETECTION_H = 8\n\nexport function useActive(\n  ref: RefObject<HTMLDivElement>,\n  position: Pos\n): boolean {\n  return useMemo<boolean>(() => {\n    if (!ref.current) {\n      return false\n    }\n\n    const [x, y] = position\n\n    const el = ref.current\n    const offsetTop = el.offsetTop\n    const offsetLeft = el.offsetLeft\n    const width = el.offsetWidth\n    const height = el.offsetHeight\n\n    // check width\n    const left = offsetLeft - EDGE_DETECTION_H\n    const right = offsetLeft + width + EDGE_DETECTION_H\n    let inHorizontalRange = left <= x && x < right\n\n    // check height\n    const top = offsetTop - EDGE_DETECTION_V\n    const bottom = offsetTop + height + EDGE_DETECTION_V\n    let inVerticalRange = top <= y && y < bottom\n\n    return inHorizontalRange && inVerticalRange\n  }, [ref, position])\n}\n","import {EMPTY} from 'rxjs'\nimport {catchError, map, pluck, switchMap, take} from 'rxjs/operators'\nimport {\n  errorHandler,\n  errorHandlerWithDefaultValue,\n  request\n} from '../shared/http'\nimport {Auth$} from './auth.service'\n\nexport enum WidgetTypes {\n  Resource,\n  API,\n  SQL,\n  ProjectInfo,\n  News,\n  Status\n}\n\nexport interface WidgetConfig {\n  link?: string\n  name?: string\n}\n\nexport interface Widget {\n  id: string\n  type: WidgetTypes\n  title: string\n  config?: WidgetConfig\n  data: {[key: string]: any}\n}\n\nexport type WidgetsLayout = Array<Widget[]>\n\nexport interface Project {\n  createdAt: string\n  id: string\n  projectName: string\n  resources: WidgetsLayout\n  username: string\n}\n\nconst username$ = Auth$.getUserInfo().pipe(pluck('username'))\n\nexport function createProject(projectName: string) {\n  return username$.pipe(\n    take(1),\n    map(username => JSON.stringify({username, projectName})),\n    map(body => ({method: 'POST', body} as RequestInit)),\n    switchMap(opts => request('projects', opts)),\n    catchError(errorHandler)\n  )\n}\n\nexport function getProjects() {\n  return request(`projects`).pipe(\n    map(res => res.Items),\n    catchError(errorHandlerWithDefaultValue([]))\n  )\n}\n\nexport function getProjectById(id: string) {\n  if (!id) {\n    return EMPTY\n  }\n\n  return request(`projects/${id}`).pipe(\n    map(res => res.Item),\n    catchError(errorHandlerWithDefaultValue({}))\n  )\n}\n\nexport function updateProjectResourcesById(\n  id: string,\n  resources: WidgetsLayout\n) {\n  if (!id) {\n    return EMPTY\n  }\n\n  return request(`projects/${id}`, {\n    method: 'PUT',\n    body: JSON.stringify(resources)\n  }).pipe(catchError(errorHandler))\n}\n","export const CONFIG = {\n  cognito: {\n    REGION: 'ap-northeast-1',\n    USER_POOL_ID: 'ap-northeast-1_1ACiUyF1H',\n    APP_CLIENT_ID: '1rt35ctopf84fbh47lllf0gg5k'\n  },\n  apiGateway: {\n    REGION: 'ap-northeast-1',\n    URL: 'https://cqto1p9g0j.execute-api.ap-northeast-1.amazonaws.com',\n    ENV: 'prod'\n  }\n}\n","import {from, Observable, of, throwError} from 'rxjs'\nimport {map, switchMap, take} from 'rxjs/operators'\nimport {CONFIG} from '../config'\nimport {Auth$} from '../services/auth.service'\nimport {Err} from './go'\n\nexport function errorHandler(e: any) {\n  console.error(e)\n\n  return of(e instanceof Err ? e : new Err(e))\n}\n\nexport function errorHandlerWithDefaultValue(defaultValue: any) {\n  return (e: any) => {\n    console.error(e)\n\n    return of(defaultValue)\n  }\n}\n\nexport function genURL(\n  path: string,\n  env: string = CONFIG.apiGateway.ENV,\n  base: string = CONFIG.apiGateway.URL\n) {\n  return new URL(`${env}/${path}`, base).href\n}\n\nexport function request(path: string, opt: RequestInit = {}) {\n  const token$ = Auth$.getSession().pipe(\n    map(session => session.getIdToken().getJwtToken()),\n    take(1)\n  )\n\n  const opt$: Observable<RequestInit> = token$.pipe(\n    map(token => {\n      const {headers, ...restOpts} = opt\n\n      const headersWithToken = new Headers(headers)\n      headersWithToken.append('Authorization', token)\n\n      return {\n        url: genURL(path),\n        headers: {Authorization: token},\n        ...restOpts\n      }\n    })\n  )\n\n  return opt$.pipe(\n    switchMap(opt => from(fetch(genURL(path), opt))),\n    switchMap(res => {\n      if (res.status >= 400) {\n        return from(res.json()).pipe(switchMap(e => throwError(new Err(e))))\n      }\n\n      return from(res.json())\n    })\n  )\n}\n","export function qs<T extends {[key: string]: string}>(q: string): T {\n  if (q.startsWith('?')) {\n    q = q.substr(1)\n  }\n\n  return q.split('&').reduce((acc, cur) => {\n    const [key, val] = cur.split('=')\n\n    return {...acc, [key]: val}\n  }, {} as T)\n}\n","import {useEffect, useLayoutEffect, useState} from 'react'\nimport {useHistory, useLocation} from 'react-router-dom'\nimport {\n  getProjectById,\n  getProjects,\n  Project,\n  WidgetsLayout\n} from '../../services/projects.service'\nimport {qs} from '../../shared/qs'\nimport {Pos} from '../../types'\n\nexport type OperateItemIndex = Pos | null\n\nexport function useProjectId(projects: Project[]) {\n  const history = useHistory()\n  const location = useLocation()\n  const {search} = location\n  const projectId = qs(search).projectId\n\n  useEffect(() => {\n    if (!projectId && projects.length > 0) {\n      history.push('/dashboard?projectId=' + projects[0].id)\n    }\n  }, [projects])\n\n  return qs(search).projectId\n}\n\nexport function useProject(id: string): [boolean, Project?] {\n  const [loading, setLoading] = useState(false)\n  const [project, setProject] = useState<Project>()\n\n  useEffect(() => {\n    setLoading(true)\n    const sub = getProjectById(id).subscribe(\n      res => setProject(res),\n      e => {\n      },\n      () => setLoading(false)\n    )\n\n    return () => sub.unsubscribe()\n  }, [id])\n\n  return [loading, project]\n}\n\nexport function exchange<T>(\n  list: Array<T[]>,\n  srcIndex: OperateItemIndex,\n  targetIndex: OperateItemIndex\n): Array<T[]> {\n  if (!srcIndex || !targetIndex) {\n    return list\n  }\n\n  const listCopy = list.slice()\n\n  const [srcCol, srcIdx] = srcIndex\n  const [targetCol, targetIdx] = targetIndex\n\n  if (srcCol === targetCol) {\n    const col = listCopy[srcCol].slice()\n    const item = col[srcIdx]\n    col.splice(srcIdx, 1)\n    col.splice(targetIdx, 0, item)\n\n    listCopy[srcCol] = col\n  } else {\n    const srcCols = listCopy[srcCol].slice()\n    const item = srcCols[srcIdx]\n\n    const targetCols = listCopy[targetCol].slice()\n\n    srcCols.splice(srcIdx, 1)\n    targetCols.splice(targetIdx, 0, item)\n\n    listCopy[srcCol] = srcCols\n    listCopy[targetCol] = targetCols\n  }\n\n  return listCopy\n}\n\nexport function isEqual(a: OperateItemIndex, b: Pos): boolean {\n  if (a === null) {\n    return false\n  }\n\n  return a[0] === b[0] && a[1] === b[1]\n}\n\nexport function useListenMouseUpEvent(cb: Function) {\n  useLayoutEffect(() => {\n    document.addEventListener('mouseup', cb as any)\n\n    return () => document.removeEventListener('mouseup', cb as any)\n  }, [cb])\n}\n\nexport function useResources(project?: Project): [WidgetsLayout, Function] {\n  const [resources, setResources] = useState(project?.resources || [])\n\n  useEffect(() => {\n    setResources(project?.resources || [])\n  }, [project])\n\n  return [resources, setResources]\n}\n\nexport function useProjects(): [boolean, Project[]] {\n  const [loading, setLoading] = useState(false)\n  const [projects, setProjects] = useState<Project[]>([])\n\n  useEffect(() => {\n    setLoading(true)\n    const sub = getProjects().subscribe(projects => {\n      setProjects(projects)\n      setLoading(false)\n    })\n\n    return () => sub.unsubscribe()\n  }, [])\n\n  return [loading, projects]\n}\n","import React, {InputHTMLAttributes} from 'react'\n\ninterface TextInputProps<T> extends InputHTMLAttributes<T> {\n  label?: string\n}\n\nexport const TextInput = ({\n  label,\n  className = '',\n  ...props\n}: TextInputProps<any>) => {\n  const cls = [\n    'block w-full h-12 py-3 border-b text-gray-600 border-blue-500 outline-none focus:border-blue-800 transition-colors duration-300 ease-in-out',\n    className\n  ].join(' ')\n\n  return (\n    <div>\n      {label && <label className=\"text-blue-500 block\">{label}</label>}\n\n      <input className={cls} {...props} />\n    </div>\n  )\n}\n","import React, {SyntheticEvent, useState} from 'react'\nimport {useHistory} from 'react-router-dom'\nimport {Auth$} from '../../services/auth.service'\nimport {Button} from '../Button'\nimport {TextInput} from '../TextInput'\n\nenum Type {\n  Login,\n  Register,\n  ConfirmSingUp\n}\n\nexport const LoginForm = () => {\n  const [type, setType] = useState(Type.Login)\n  const [username, setUsername] = useState('')\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [isSubmitting, setSubmitting] = useState(false)\n  const [code, setCode] = useState('')\n  const history = useHistory()\n\n  const onSignIn = async () => {\n    if (!username || !password) {\n      return alert(\"You haven't finished all the fields.\")\n    }\n\n    setSubmitting(true)\n    const userInfo = await Auth$.signIn(username, password)\n    setSubmitting(false)\n\n    if (userInfo) {\n      history.push('/')\n    }\n  }\n\n  const onSignUp = async () => {\n    if (!username || !password || !email) {\n      return alert(\"You haven't finished all the fields.\")\n    }\n\n    setSubmitting(true)\n    const isOk = await Auth$.signUp(username, password, email)\n    setSubmitting(false)\n\n    if (!isOk) {\n      return alert('Sign-up failed, please try other username or try latter.')\n    }\n\n    setType(Type.ConfirmSingUp)\n  }\n\n  const onConfirmed = async () => {\n    if (!code) {\n      return alert('Please enter your verify code.')\n    }\n\n    setSubmitting(true)\n    const isOk = await Auth$.confirmSignUp(username, code)\n    setSubmitting(false)\n\n    if (!isOk) {\n      alert('Confirmed failed. Please check if you have input the right code.')\n    }\n\n    alert('You have confirmed your account.')\n    setType(Type.Login)\n\n    setUsername('')\n    setPassword('')\n  }\n\n  const onSubmit = (e: SyntheticEvent) => {\n    e.preventDefault()\n\n    switch (type) {\n      case Type.Login:\n        return onSignIn()\n      case Type.Register:\n        return onSignUp()\n      case Type.ConfirmSingUp:\n        return onConfirmed()\n    }\n  }\n\n  return (\n    <div className=\"p-4\">\n      <form onSubmit={onSubmit}>\n        {type !== Type.ConfirmSingUp && (\n          <>\n            <TextInput\n              className=\"block w-full mb-4\"\n              type=\"username\"\n              placeholder=\"Username\"\n              value={username}\n              onChange={e => setUsername(e.target.value)}\n            />\n\n            <TextInput\n              className=\"block w-full mb-4\"\n              placeholder=\"Password\"\n              type=\"password\"\n              value={password}\n              onChange={e => setPassword(e.target.value)}\n            />\n\n            {type === Type.Register && (\n              <TextInput\n                className=\"block w-full\"\n                placeholder=\"Email\"\n                type=\"email\"\n                value={email}\n                onChange={e => setEmail(e.target.value)}\n              />\n            )}\n          </>\n        )}\n\n        {type === Type.ConfirmSingUp && (\n          <>\n            <h1 className=\"font-hairline mb-8 text-2xl\">\n              Code has sent to your mailbox.\n            </h1>\n\n            <TextInput\n              className=\"block w-full\"\n              placeholder=\"Code\"\n              type=\"text\"\n              value={code}\n              onChange={e => setCode(e.target.value)}\n            />\n          </>\n        )}\n\n        <Button\n          type=\"submit\"\n          className=\"mt-10\"\n          primary\n          block\n          loading={isSubmitting}\n          onClick={onSubmit}\n        >\n          {type === Type.ConfirmSingUp\n            ? 'Confirmed'\n            : type === Type.Login\n            ? 'Sign in'\n            : 'Sign up'}\n        </Button>\n      </form>\n\n      <div className=\"text-right mt-8 text-gray-600\">\n        {type === Type.Login ? (\n          <div>\n            Haven't got an account?\n            <Button onClick={() => setType(Type.Register)}>Sign Up</Button>\n          </div>\n        ) : (\n          <div>\n            Click here to\n            <Button onClick={() => setType(Type.Login)}>Sign In</Button>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n","import React, {ChangeEvent} from 'react'\nimport {CProps, WidgetProps} from '../../types'\nimport {TextInput} from '../TextInput'\n\ninterface APIWidgetProps extends WidgetProps {}\n\nexport const APIWidget = ({\n  id,\n  edit,\n  data,\n  onChange\n}: CProps<APIWidgetProps>) => {\n  if (!data) {\n    return <div className=\"text-gray-700\">API is not available now.</div>\n  }\n\n  const onDataSourceChange = (e: ChangeEvent<HTMLInputElement>) =>\n    onChange({id, data: {source: e.target.value}})\n\n  if (edit) {\n    return (\n      <TextInput\n        label=\"API Source\"\n        value={data.source}\n        onChange={onDataSourceChange}\n      />\n    )\n  }\n\n  return (\n    <div>\n      <div>API Source</div>\n      <div className=\"text-gray-700\">{data.source}</div>\n    </div>\n  )\n}\n","import React from 'react'\nimport {Project} from '../../services/projects.service'\nimport {CProps, WidgetProps} from '../../types'\n\ninterface ProjectInfoProps extends WidgetProps {\n  data: Project\n}\n\nexport const ProjectInfo = ({data}: CProps<ProjectInfoProps>) => {\n  if (!data) {\n    return (\n      <div className=\"text-gray-700\">Project info is not available now.</div>\n    )\n  }\n\n  return (\n    <div>\n      <div className=\"mb-3\">\n        <h3>Project name</h3>\n        <div className=\"text-gray-600\">{data.projectName}</div>\n      </div>\n\n      <div className=\"mb-3\">\n        <h3>Project ID</h3>\n        <div className=\"text-gray-600\">{data.id}</div>\n      </div>\n\n      <div>\n        <h3>Created at</h3>\n        <div className=\"text-gray-600\">\n          {new Date(data.createdAt).toDateString()}\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport {CProps, WidgetProps} from '../../types'\n\ninterface ResourceWidget extends WidgetProps {}\n\nexport const ResourceWidget = (props: CProps<ResourceWidget>) => {\n  return <div className=\"text-gray-600\">No more resources for now.</div>\n}\n","import React, {ChangeEvent} from 'react'\nimport {noop} from '../../shared/noop'\nimport {CProps, WidgetProps} from '../../types'\nimport {TextInput} from '../TextInput'\n\ninterface SQLWidgetProps extends WidgetProps {}\n\nexport const SQLWidget = ({\n  id,\n  edit = false,\n  data,\n  onChange = noop\n}: CProps<SQLWidgetProps>) => {\n  if (!data) {\n    return <div className=\"text-gray-700\">SQL is not available now.</div>\n  }\n\n  const onDataSourceChange = (e: ChangeEvent<HTMLInputElement>) =>\n    onChange({id, data: {source: e.target.value}})\n\n  if (edit) {\n    return (\n      <TextInput\n        label=\"SQL Source\"\n        value={data.source}\n        onChange={onDataSourceChange}\n      />\n    )\n  }\n\n  return (\n    <div>\n      <div>SQL Source</div>\n      <div className=\"text-gray-700\">{data.source}</div>\n    </div>\n  )\n}\n","import React from 'react'\nimport {APIWidget} from '../../components/APIWidget'\nimport {ProjectInfo} from '../../components/ProjectInfo'\nimport {ResourceWidget} from '../../components/ResourceWidget'\nimport {SQLWidget} from '../../components/SQLWidget'\nimport {WidgetTypes} from '../../services/projects.service'\nimport {CProps, WidgetProps} from '../../types'\n\ninterface WidgetSwitcherProps extends WidgetProps {\n  type: WidgetTypes\n}\n\nexport const WidgetSwitcher = ({\n  id,\n  edit,\n  type,\n  data,\n  onChange\n}: CProps<WidgetSwitcherProps>) => {\n  let View = null\n\n  switch (type) {\n    case WidgetTypes.Resource:\n      View = ResourceWidget\n      break\n    case WidgetTypes.ProjectInfo:\n      View = ProjectInfo\n      break\n    case WidgetTypes.API:\n      View = APIWidget\n      break\n    case WidgetTypes.SQL:\n      View = SQLWidget\n      break\n    default:\n      return null\n  }\n\n  return <View id={id} edit={edit} data={data} onChange={onChange}/>\n}\n","import React, {Fragment, MouseEvent, useCallback, useState} from 'react'\nimport {useHistory} from 'react-router-dom'\nimport {AppBar} from '../../components/AppBar'\nimport {Button} from '../../components/Button'\nimport {Card} from '../../components/Card'\nimport {DetectionArea} from '../../components/DetectionArea'\nimport {Spinner} from '../../components/Spinner'\nimport {updateProjectResourcesById} from '../../services/projects.service'\nimport {Pos} from '../../types'\nimport {\n  exchange,\n  isEqual,\n  OperateItemIndex,\n  useListenMouseUpEvent,\n  useProject,\n  useProjectId,\n  useProjects,\n  useResources\n} from './Dashboard.service'\nimport {WidgetSwitcher} from './WidgetSwitcher'\n\nexport const Dashboard = () => {\n  const [loadingProjects, projects] = useProjects()\n  const projectId = useProjectId(projects)\n  const history = useHistory()\n  const [loading, project] = useProject(projectId)\n  const [isDragging, setDragging] = useState(false)\n  const [operateItemIndex, setOperateItemIndex] = useState<OperateItemIndex>(\n    null\n  )\n  const [position, setPosition] = useState<Pos>([0, 0])\n  const [targetIndex, setTargetIndex] = useState<OperateItemIndex>(null)\n  const [resources, setResources] = useResources(project)\n  const [edit, setEdit] = useState(false)\n\n  const cancelDragging = useCallback(() => {\n    setDragging(false)\n\n    if (!operateItemIndex || !targetIndex) {\n      return\n    }\n\n    const newResources = exchange(resources, operateItemIndex, targetIndex)\n\n    setResources(newResources)\n    setOperateItemIndex(null)\n    setTargetIndex(null)\n\n    updateProjectResourcesById(projectId, newResources).subscribe({\n      error: e => console.error('Update project resources failed.', e)\n    })\n  }, [\n    operateItemIndex,\n    targetIndex,\n    resources,\n    setDragging,\n    setResources,\n    setOperateItemIndex,\n    setTargetIndex\n  ])\n\n  useListenMouseUpEvent(cancelDragging)\n\n  const onPositionChange = (position: Pos) => setPosition(position)\n\n  const onMouseDown = (e: MouseEvent<HTMLDivElement>, index: Pos) => {\n    setDragging(true)\n    setOperateItemIndex(index)\n  }\n\n  const onIndexChange = (index: Pos) => setTargetIndex(index)\n\n  const onProjectChange = (id: string) =>\n    history.push('/dashboard?projectId=' + id)\n\n  const onEdit = () => setEdit(true)\n\n  const onSave = () => {\n    setEdit(false)\n\n    updateProjectResourcesById(projectId, resources).subscribe(\n      () => console.log('Saved successfully.'),\n      e => console.error('Save failed.')\n    )\n  }\n\n  const onDataChange = ({id, data}: {id: string; data: any}) => {\n    const newResources = resources.slice().map(resource =>\n      resource.map(r => {\n        if (r.id === id) {\n          return {...r, data}\n        }\n\n        return r\n      })\n    )\n\n    setResources(newResources)\n  }\n\n  return (\n    <AppBar\n      projects={projects}\n      projectId={projectId}\n      onProjectChange={onProjectChange}\n    >\n      {loading || loadingProjects ? (\n        <div className=\"flex justify-center mt-40 h-full w-full\">\n          <Spinner className=\"w-16 h-16\" />\n        </div>\n      ) : (\n        <>\n          {project?.projectName && (\n            <div className=\"flex justify-between border-b p-4 \">\n              <div className=\"text-3xl\">{project.projectName}</div>\n\n              <Button onClick={edit ? onSave : onEdit}>\n                {edit ? 'Save' : 'Customize'}\n              </Button>\n            </div>\n          )}\n\n          <div className=\"px-8 py-6\">\n            <div className=\"flex\">\n              {resources.map((col, colIndex) => (\n                <div key={colIndex} className=\"flex-1 px-2\">\n                  {isDragging && (\n                    <DetectionArea\n                      index={[colIndex, 0]}\n                      position={position}\n                      onChange={onIndexChange}\n                    />\n                  )}\n\n                  {col.map((item, index: number) => (\n                    <Fragment key={item.id}>\n                      <Card\n                        className=\"mb-3\"\n                        isDragging={\n                          isDragging &&\n                          isEqual(operateItemIndex, [colIndex, index])\n                        }\n                        collapse={isDragging}\n                        title={item.title}\n                        footer={item.config}\n                        onMouseDown={e => onMouseDown(e, [colIndex, index])}\n                        onPositionChange={onPositionChange}\n                      >\n                        <WidgetSwitcher\n                          id={item.id}\n                          edit={edit}\n                          type={item.type}\n                          data={item.data}\n                          onChange={onDataChange}\n                        />\n                      </Card>\n\n                      {isDragging && (\n                        <DetectionArea\n                          index={[colIndex, index + 1]}\n                          position={position}\n                          onChange={onIndexChange}\n                        />\n                      )}\n                    </Fragment>\n                  ))}\n                </div>\n              ))}\n            </div>\n          </div>\n        </>\n      )}\n    </AppBar>\n  )\n}\n","import React from 'react'\nimport {LoginForm} from '../../components/LoginForm'\nimport {Logo} from '../../components/Logo'\n\nexport const Login = () => {\n  return (\n    <div>\n      <div className=\"px-4 py-1\">\n        <Logo />\n      </div>\n\n      <div className=\"lg:w-1/3 md:w-1/2 w-11/12 mt-48 mx-auto shadow\">\n        <LoginForm />\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport {CProps} from '../../types'\n\nexport const Alert = ({className = '', children}: CProps<any>) => {\n  const cls = [\n    'p-4 border border-red-300 bg-red-200 text-red-700 rounded',\n    className\n  ].join(' ')\n\n  return <div className={cls}>{children}</div>\n}\n","import React, {SyntheticEvent, useState} from 'react'\nimport {useHistory} from 'react-router-dom'\nimport {Alert} from '../../components/Alert'\nimport {AppBar} from '../../components/AppBar'\nimport {Button} from '../../components/Button'\nimport {TextInput} from '../../components/TextInput'\nimport {createProject} from '../../services/projects.service'\nimport {Err} from '../../shared/go'\n\nexport const NewProject = () => {\n  const [projectName, setProjectName] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(false)\n  const [errMsg, setErrMsg] = useState('')\n  const history = useHistory()\n\n  const onSubmit = (e: SyntheticEvent) => {\n    e.preventDefault()\n\n    if (!projectName || !projectName.trim()) {\n      return\n    }\n\n    setLoading(true)\n    createProject(projectName).subscribe(res => {\n      setLoading(false)\n\n      if (res instanceof Err) {\n        setErrMsg(res.e.msg || 'Create project failed!')\n        setError(true)\n        return\n      }\n\n      setError(false)\n      setErrMsg('')\n      history.push(`/dashboard?projectId=${res.id}`)\n    })\n  }\n\n  return (\n    <AppBar>\n      <div>\n        <h1 className=\"text-2xl border-b p-4\">New project</h1>\n\n        <div className=\"p-4\">\n          {error && <Alert className=\"mb-4\">{errMsg}</Alert>}\n\n          <form onSubmit={onSubmit}>\n            <div className=\"w-1/3\">\n              <TextInput\n                label=\"Project name\"\n                placeholder=\"Project name\"\n                value={projectName}\n                onChange={e => setProjectName(e.target.value)}\n              />\n            </div>\n\n            <div className=\"flex items-center mt-8\">\n              <Button\n                type=\"submit\"\n                className=\"mr-4\"\n                primary\n                loading={loading}\n                onClick={onSubmit}\n              >\n                Create\n              </Button>\n\n              <Button onClick={history.goBack}>Cancel</Button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </AppBar>\n  )\n}\n","import React from 'react'\nimport {BrowserRouter, Redirect, Route, Switch} from 'react-router-dom'\nimport {Guard} from './components/Guard'\nimport {Launch} from './components/Launch'\nimport {Dashboard} from './pages/Dashboard'\nimport {Login} from './pages/Login'\nimport {NewProject} from './pages/NewProject'\nimport {useAuthConfig} from './shared/useAuthConfig'\nimport {useCurrentUser} from './shared/useCurrentUser'\n\nexport function App() {\n  useAuthConfig()\n  const {user, loading} = useCurrentUser()\n\n  const guard = () => Boolean(user)\n\n  if (loading) {\n    return (\n      <div className=\"absolute w-full h-full\">\n        <Launch />\n      </div>\n    )\n  }\n\n  return (\n    <BrowserRouter>\n      <Switch>\n        <Route exact path=\"/\">\n          <Redirect to=\"/dashboard\" />\n        </Route>\n        <Guard guard={guard} path=\"/dashboard\">\n          <Dashboard />\n        </Guard>\n        <Guard guard={guard} path=\"/new-project\">\n          <NewProject />\n        </Guard>\n        <Route path=\"/login\">\n          <Login />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  )\n}\n","import Amplify from 'aws-amplify'\nimport {useEffect} from 'react'\nimport {CONFIG} from '../config'\n\nexport function useAuthConfig() {\n  useEffect(() => {\n    Amplify.configure({\n      Auth: {\n        mandatorySignIn: true,\n        region: CONFIG.cognito.REGION,\n        userPoolId: CONFIG.cognito.USER_POOL_ID,\n        userPoolWebClientId: CONFIG.cognito.APP_CLIENT_ID\n      }\n    })\n  }, [])\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport {App} from './App'\nimport * as serviceWorker from './serviceWorker'\nimport './tailwind.output.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\nserviceWorker.unregister()\n"],"sourceRoot":""}