(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{136:function(e,t,n){e.exports=n(223)},222:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(112),o=n.n(c),u=n(23),i=n(12),l=n(5),s=n(31),f=function(e){var t=e.redirectTo,n=void 0===t?"/login":t,c=e.guard,o=e.children,u=Object(s.a)(e,["redirectTo","guard","children"]),f=Object(a.useState)(!0),m=Object(l.a)(f,2),d=m[0],b=m[1],p=Object(a.useState)(!1),v=Object(l.a)(p,2),j=v[0],g=v[1];return Object(a.useEffect)((function(){var e,t=c();return"boolean"===typeof t?(g(t),b(!1)):t instanceof Promise?t.then((function(e){return g(e)})).catch((function(e){return g(!1)})).finally((function(){return b(!1)})):e=t.subscribe((function(e){g(e)}),(function(){return g(!1)}),(function(){return b(!1)})),function(){e&&e.unsubscribe()}}),[c]),d?null:r.a.createElement(i.b,Object.assign({},u,{render:function(e){var t=e.location;return j?o:r.a.createElement(i.a,{to:{pathname:n,state:{from:t}}})}}))},m=n(114),d=function(e){var t=e.className,n=["inline-flex",void 0===t?"":t].join(" ");return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:n,style:b.rotate},r.a.createElement(m.a,{className:"w-full h-full"})),r.a.createElement("style",null,"\n      @keyframes Spinner {\n        0 {\n          transform: rotate(0);\n        }\n        25% {\n          transform: rotate(80deg);\n        }\n        50% {\n          transform: rotate(160deg);\n        }\n        75% {\n          transform: rotate(240deg);\n        }\n        100% {\n          transform: rotate(360deg);\n        }\n      }\n      "))},b={rotate:{animationDuration:"1s",animationTimingFunction:"linear",animationIterationCount:"infinite",animationName:"Spinner"}},p=function(){return r.a.createElement("div",{className:"flex justify-center items-center h-full w-full"},r.a.createElement(d,{className:"w-20 h-20"}))},v=n(20),j=n(27),g=function(){},h=n(14),E=n.n(h),O=n(22),x=n(33),w=n(127),N=n(128),y=n(129),S=n(252),k=n(256),C=n(115),I=function e(t){Object(C.a)(this,e),this.e=t,console.error(t)};function P(e){return e.catch((function(e){return new I(e)}))}var L=n(249),U=n(250),R=n(255),A=n(61),D=n(251);var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new L.a((function(e){return e})),n=t.pipe(Object(U.a)((function(e,t){return t(e)}),e),Object(R.a)(1)),a=function(e){t.next(e)},r=function(e){return function(t,n){if(void 0==t)throw new Error("missing 'predict' parameter in select' method!");var a=t;return"string"===typeof t&&(a=function(e){for(var a,r=t.split("."),c=e;null!==c&&void 0!==(a=r.shift());)if(void 0===(c=c[a]))return n;return c}),e.pipe(Object(A.a)(a),Object(D.a)())}},c=function(t){a((function(n){var a=Object(v.a)({},n);return t?(Reflect.deleteProperty(a,t),a):e}))};return{state$:n,select:r(n),createReducer:a,clear:c}}();F.state$.subscribe((function(e){console.group("Store"),console.log(e),console.groupEnd()}));var T=F,_="userInfo",B="session";function Q(e){T.createReducer((function(t){return Object(v.a)({},t,Object(x.a)({},_,e))}))}function W(e){T.createReducer((function(t){return Object(v.a)({},t,Object(x.a)({},B,e))}))}function z(){return(z=Object(O.a)(E.a.mark((function e(t,n){var a,r,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(w.a.signIn({username:t,password:n}));case 2:if(!((a=e.sent)instanceof I)){e.next=7;break}return console.error("Login failed.\n",a.e),Q(null),e.abrupt("return",null);case 7:return e.next=9,w.a.currentUserInfo();case 9:return r=e.sent,e.next=12,w.a.currentSession();case 12:return c=e.sent,Q(r),W(c),e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(O.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(w.a.signOut());case 2:if(!((t=e.sent)instanceof I)){e.next=6;break}return console.error("Logout failed.\n",t.e),e.abrupt("return",!1);case 6:return Q(null),e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(O.a)(E.a.mark((function e(t,n,a){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(w.a.signUp({username:t,password:n,attributes:{email:a}}));case 2:if(!((r=e.sent)instanceof I)){e.next=6;break}return console.error("Sign up failed.\n",r.e),e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(O.a)(E.a.mark((function e(t,n){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(w.a.confirmSignUp(t,n));case 2:if(!((a=e.sent)instanceof I)){e.next=6;break}return console.error("Confirmed failed.\n",a.e),e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y={getSession:function(){return T.select(B).pipe(Object(S.a)((function(e){return e?Object(y.a)(e):Object(N.a)(w.a.currentSession().then((function(e){return e&&W(e),e})))})))},getUserInfo:function(){return T.select(_,null).pipe(Object(S.a)((function(e){return null===e?Object(N.a)(w.a.currentUserInfo()).pipe(Object(k.a)((function(e){null!==e&&Q(e)}))):Object(y.a)(e)})))},signIn:function(e,t){return z.apply(this,arguments)},signUp:function(e,t,n){return J.apply(this,arguments)},signOut:function(){return H.apply(this,arguments)},confirmSignUp:function(e,t){return M.apply(this,arguments)}};function G(){var e=Object(a.useState)(!0),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),o=Object(l.a)(c,2),u=o[0],i=o[1];return Object(a.useEffect)((function(){var e=Y.getUserInfo().subscribe((function(e){i(e),r(!1)}));return function(){return e.unsubscribe()}}),[]),{loading:n,user:u}}var $=function(e){var t=e.primary,n=void 0!==t&&t,a=e.block,c=void 0!==a&&a,o=e.className,u=void 0===o?"":o,i=e.loading,l=void 0!==i&&i,f=e.disabled,m=void 0!==f&&f,b=e.onClick,p=void 0===b?g:b,v=e.children,j=Object(s.a)(e,["primary","block","className","loading","disabled","onClick","children"]),h=["px-3","py-2","rounded","transition-colors","duration-300","ease-in-out","focus:outline-none"];c&&h.push("w-full");var E=m||l,O=n?["text-white",E?"bg-gray-400":"bg-blue-500",E?"":"hover:bg-blue-800"]:[E?"text-gray-400":"text-blue-500",E?"border-gray-400":"border-blue-500",E?"":"hover:border-blue-800",E?"":"hover:text-blue-800"];(m||l)&&O.push("cursor-not-allowed");var x=[].concat(h,O,[u]).join(" ");return r.a.createElement("button",Object.assign({className:x,disabled:E,onClick:p},j),r.a.createElement("div",{className:l?"flex items-center justify-center":""},r.a.createElement("span",{className:"flex mr-2"},l&&r.a.createElement(d,null)),v))},V=function(e){var t=e.user,n=Object(a.useState)(!1),c=Object(l.a)(n,2),o=c[0],u=c[1],i=function(){var e=Object(O.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y.signOut());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"border cursor-pointer p-2 rounded-full text-white hover:bg-blue-800",onClick:function(){return u(!o)}},r.a.createElement(j.d,{className:"text-xl"})),o&&r.a.createElement("div",{className:"absolute bg-white content-between mr-2 mt-12 right-0 shadow-md top-0 w-64"},r.a.createElement("div",{className:"flex p-3"},r.a.createElement(j.d,{className:"text-3xl text-6xl text-gray-800"}),r.a.createElement("div",{className:"ml-4"},r.a.createElement("h1",{className:"font-bold"},t.username),r.a.createElement("h2",{className:"text-base"},t.attributes.email))),r.a.createElement("div",{className:"bg-gray-200 border-t p-2 text-right"},r.a.createElement($,{primary:!0,onClick:i},"Logout")))):r.a.createElement("div",null,"Login")},X=function(e){var t=e.reverse,n=["flex items-center text-3xl cursor-pointer",void 0!==t&&t?"text-white":"text-blue-500"].join(" ");return r.a.createElement(u.b,{to:"/"},r.a.createElement("h1",{className:n},r.a.createElement(j.c,{className:"mr-2"}),"Cloud dashboard"))},q=function(e){var t=e.projectId,n=e.projects,a=void 0===n?[]:n,c=e.onProjectChange,o=void 0===c?g:c,u=e.children,l=G().user,s=Object(i.g)(),f="/new-project"===Object(i.i)().path,m=null!==l;return r.a.createElement("div",null,r.a.createElement("div",{className:"py-1 px-4 shadow bg-blue-500 flex justify-between items-center fixed w-full"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(X,{reverse:!0}),a.length>0&&r.a.createElement("div",{className:"ml-6"},r.a.createElement("select",{className:"bg-blue-500 border h-8 px-2 rounded text-white w-48",value:t,onChange:function(e){return o(e.target.value)}},a.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.projectName)}))))),m&&r.a.createElement("div",{className:"flex items-center"},!f&&r.a.createElement($,{primary:!0,className:"mr-8 text-white",onClick:function(){return s.push("/new-project")}},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(j.a,{className:"mr-1"}),"New project")),l&&r.a.createElement(V,{user:l}))),r.a.createElement("div",{className:"overflow-y-auto pt-12"},u))},K=n(130),Z=n(125);function ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=Array.from(t),r=[];return te(a,r),r.join(" ")}function te(e,t){if(0!==e.length){var n=Object(Z.a)(e),a=n[0],r=n.slice(1);if("string"===typeof a)t.push(a);else if(Array.isArray(a)){var c=a.filter(Boolean).join(" ");t.push(c)}else{var o=Object.entries(a).reduce((function(e,t){var n=Object(l.a)(t,2),a=n[0],r=n[1];return[].concat(Object(K.a)(e),[r?a:""])}),[]).filter(Boolean).join(" ");t.push(o)}te(r,t)}}var ne=function(e){var t=e.link,n=e.children;return r.a.createElement("a",{href:t,className:"block border-t h-full w-full p-4 hover:bg-gray-100 transition-colors duration-300 ease-in-out",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(j.b,{className:"mr-4 text-2xl"}),n))},ae=function(){return r.a.createElement("div",{className:"border bg-white w-full h-16 shadow-inner mb-3"})},re=r.a.memo((function(e){var t=e.title,n=e.footer,c=e.isDragging,o=void 0!==c&&c,u=e.collapse,i=void 0!==u&&u,s=e.className,f=void 0===s?"":s,m=e.onPositionChange,d=void 0===m?g:m,b=e.onMouseDown,p=void 0===b?g:b,v=e.children,j=Object(a.useRef)(null),h=function(e,t){var n=Object(a.useState)([0,0]),r=Object(l.a)(n,2),c=r[0],o=r[1];return Object(a.useLayoutEffect)((function(){if(e.current&&t){var n=function(n){if(e.current&&t){var a=e.current,r=a.offsetWidth>>1,c=a.offsetHeight>>1;a.style.left=n.clientX-r+"px",a.style.top=n.clientY-c+"px",o([n.clientX,n.clientY])}};return document.addEventListener("mousemove",n),function(){return document.removeEventListener("mousemove",n)}}}),[e,t]),c}(j,o);return Object(a.useEffect)((function(){d(h)}),[h]),r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(ae,null),r.a.createElement("div",{ref:j,className:ee("bg-white duration-300 ease-in-out hover:shadow-lg overflow-hidden shadow-md transition-shadow select-none",f,{"absolute w-1/3 z-10 opacity-75":o})},r.a.createElement("div",{onMouseDown:p,className:ee("text-2xl p-4 h-16 overflow-hidden",o?"cursor-grabbing":"cursor-grab")},t),!i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"px-4 pb-4"},v),n&&r.a.createElement(ne,{link:n.link},n.name))))}));function ce(e){var t=e.index,n=e.position,c=e.onChange,o=Object(a.useRef)(null),u=function(e,t){return Object(a.useMemo)((function(){if(!e.current)return!1;var n=Object(l.a)(t,2),a=n[0],r=n[1],c=e.current,o=c.offsetTop,u=c.offsetLeft,i=c.offsetWidth,s=c.offsetHeight;return u-8<=a&&a<u+i+8&&(o-44<=r&&r<o+s+44)}),[e,t])}(o,n);return Object(a.useEffect)((function(){u&&c(t)}),[u]),r.a.createElement("div",{ref:o,className:ee("w-full h-1 mb-3",u?"bg-blue-500":"bg-gray-200")})}var oe,ue=n(60),ie=n(253),le=n(257),se=n(254),fe=n(116),me={REGION:"ap-northeast-1",USER_POOL_ID:"ap-northeast-1_1ACiUyF1H",APP_CLIENT_ID:"1rt35ctopf84fbh47lllf0gg5k"},de={REGION:"ap-northeast-1",URL:"https://cqto1p9g0j.execute-api.ap-northeast-1.amazonaws.com",ENV:"prod"};function be(e){return console.error(e),Object(y.a)(e instanceof I?e:new I(e))}function pe(e){return function(t){return console.error(t),Object(y.a)(e)}}function ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:de.ENV,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:de.URL;return new URL("".concat(t,"/").concat(e),n).href}function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Y.getSession().pipe(Object(A.a)((function(e){return e.getIdToken().getJwtToken()})),Object(le.a)(1)),a=n.pipe(Object(A.a)((function(n){var a=t.headers,r=Object(s.a)(t,["headers"]);return new Headers(a).append("Authorization",n),Object(v.a)({url:ve(e),headers:{Authorization:n}},r)})));return a.pipe(Object(S.a)((function(t){return Object(N.a)(fetch(ve(e),t))})),Object(S.a)((function(e){return e.status>=400?Object(N.a)(e.json()).pipe(Object(S.a)((function(e){return Object(fe.a)(new I(e))}))):Object(N.a)(e.json())})))}!function(e){e[e.Resource=0]="Resource",e[e.API=1]="API",e[e.SQL=2]="SQL",e[e.ProjectInfo=3]="ProjectInfo",e[e.News=4]="News",e[e.Status=5]="Status"}(oe||(oe={}));var ge=Y.getUserInfo().pipe(Object(ie.a)("username"));function he(e,t){return e?je("projects/".concat(e),{method:"PUT",body:JSON.stringify(t)}).pipe(Object(se.a)(be)):ue.a}function Ee(e){return e.startsWith("?")&&(e=e.substr(1)),e.split("&").reduce((function(e,t){var n=t.split("="),a=Object(l.a)(n,2),r=a[0],c=a[1];return Object(v.a)({},e,Object(x.a)({},r,c))}),{})}function Oe(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(),u=Object(l.a)(o,2),i=u[0],s=u[1];return Object(a.useEffect)((function(){c(!0);var t=function(e){return e?je("projects/".concat(e)).pipe(Object(A.a)((function(e){return e.Item})),Object(se.a)(pe({}))):ue.a}(e).subscribe((function(e){return s(e)}),(function(e){}),(function(){return c(!1)}));return function(){return t.unsubscribe()}}),[e]),[r,i]}function xe(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),o=Object(l.a)(c,2),u=o[0],i=o[1];return Object(a.useEffect)((function(){r(!0);var e=je("projects").pipe(Object(A.a)((function(e){return e.Items})),Object(se.a)(pe([]))).subscribe((function(e){i(e),r(!1)}));return function(){return e.unsubscribe()}}),[]),[n,u]}var we,Ne=function(e){var t=e.label,n=e.className,a=void 0===n?"":n,c=Object(s.a)(e,["label","className"]),o=["block w-full h-12 py-3 border-b text-gray-600 border-blue-500 outline-none focus:border-blue-800 transition-colors duration-300 ease-in-out",a].join(" ");return r.a.createElement("div",null,t&&r.a.createElement("label",{className:"text-blue-500 block"},t),r.a.createElement("input",Object.assign({className:o},c)))},ye=function(e){var t=e.id,n=e.edit,a=e.data,c=e.onChange;if(!a)return r.a.createElement("div",{className:"text-gray-700"},"API is not available now.");return n?r.a.createElement(Ne,{label:"API Source",value:a.source,onChange:function(e){return c({id:t,data:{source:e.target.value}})}}):r.a.createElement("div",null,r.a.createElement("div",null,"API Source"),r.a.createElement("div",{className:"text-gray-700"},a.source))},Se=function(e){var t=e.data;return t?r.a.createElement("div",null,r.a.createElement("div",{className:"mb-3"},r.a.createElement("h3",null,"Project name"),r.a.createElement("div",{className:"text-gray-600"},t.projectName)),r.a.createElement("div",{className:"mb-3"},r.a.createElement("h3",null,"Project ID"),r.a.createElement("div",{className:"text-gray-600"},t.id)),r.a.createElement("div",null,r.a.createElement("h3",null,"Created at"),r.a.createElement("div",{className:"text-gray-600"},new Date(t.createdAt).toDateString()))):r.a.createElement("div",{className:"text-gray-700"},"Project info is not available now.")},ke=function(e){return r.a.createElement("div",{className:"text-gray-600"},"No more resources for now.")},Ce=function(e){var t=e.id,n=e.edit,a=void 0!==n&&n,c=e.data,o=e.onChange,u=void 0===o?g:o;if(!c)return r.a.createElement("div",{className:"text-gray-700"},"SQL is not available now.");return a?r.a.createElement(Ne,{label:"SQL Source",value:c.source,onChange:function(e){return u({id:t,data:{source:e.target.value}})}}):r.a.createElement("div",null,r.a.createElement("div",null,"SQL Source"),r.a.createElement("div",{className:"text-gray-700"},c.source))},Ie=function(e){var t=e.id,n=e.edit,a=e.type,c=e.data,o=e.onChange,u=null;switch(a){case oe.Resource:u=ke;break;case oe.ProjectInfo:u=Se;break;case oe.API:u=ye;break;case oe.SQL:u=Ce;break;default:return null}return r.a.createElement(u,{id:t,edit:n,data:c,onChange:o})},Pe=function(){var e,t=xe(),n=Object(l.a)(t,2),c=n[0],o=n[1],u=function(e){var t=Object(i.g)(),n=Object(i.h)().search,r=Ee(n).projectId;return Object(a.useEffect)((function(){!r&&e.length>0&&t.push("/dashboard?projectId="+e[0].id)}),[e]),Ee(n).projectId}(o),s=Object(i.g)(),f=Oe(u),m=Object(l.a)(f,2),b=m[0],p=m[1],j=Object(a.useState)(!1),g=Object(l.a)(j,2),h=g[0],E=g[1],O=Object(a.useState)(null),x=Object(l.a)(O,2),w=x[0],N=x[1],y=Object(a.useState)([0,0]),S=Object(l.a)(y,2),k=S[0],C=S[1],I=Object(a.useState)(null),P=Object(l.a)(I,2),L=P[0],U=P[1],R=function(e){var t=Object(a.useState)((null===e||void 0===e?void 0:e.resources)||[]),n=Object(l.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){c((null===e||void 0===e?void 0:e.resources)||[])}),[e]),[r,c]}(p),A=Object(l.a)(R,2),D=A[0],F=A[1],T=Object(a.useState)(!1),_=Object(l.a)(T,2),B=_[0],Q=_[1],W=Object(a.useCallback)((function(){if(E(!1),w&&L){var e=function(e,t,n){if(!t||!n)return e;var a=e.slice(),r=Object(l.a)(t,2),c=r[0],o=r[1],u=Object(l.a)(n,2),i=u[0],s=u[1];if(c===i){var f=a[c].slice(),m=f[o];f.splice(o,1),f.splice(s,0,m),a[c]=f}else{var d=a[c].slice(),b=d[o],p=a[i].slice();d.splice(o,1),p.splice(s,0,b),a[c]=d,a[i]=p}return a}(D,w,L);F(e),N(null),U(null),he(u,e).subscribe({error:function(e){return console.error("Update project resources failed.",e)}})}}),[w,L,D,E,F,N,U]);e=W,Object(a.useLayoutEffect)((function(){return document.addEventListener("mouseup",e),function(){return document.removeEventListener("mouseup",e)}}),[e]);var z=function(e){return C(e)},H=function(e){return U(e)},J=function(e){var t=e.id,n=e.data,a=D.slice().map((function(e){return e.map((function(e){return e.id===t?Object(v.a)({},e,{data:n}):e}))}));F(a)};return r.a.createElement(q,{projects:o,projectId:u,onProjectChange:function(e){return s.push("/dashboard?projectId="+e)}},b||c?r.a.createElement("div",{className:"flex justify-center mt-40 h-full w-full"},r.a.createElement(d,{className:"w-16 h-16"})):r.a.createElement(r.a.Fragment,null,(null===p||void 0===p?void 0:p.projectName)&&r.a.createElement("div",{className:"flex justify-between border-b p-4 "},r.a.createElement("div",{className:"text-3xl"},p.projectName),r.a.createElement($,{onClick:B?function(){Q(!1),he(u,D).subscribe((function(){return console.log("Saved successfully.")}),(function(e){return console.error("Save failed.")}))}:function(){return Q(!0)}},B?"Save":"Customize")),r.a.createElement("div",{className:"px-8 py-6"},r.a.createElement("div",{className:"flex"},D.map((function(e,t){return r.a.createElement("div",{key:t,className:"flex-1 px-2"},h&&r.a.createElement(ce,{index:[t,0],position:k,onChange:H}),e.map((function(e,n){return r.a.createElement(a.Fragment,{key:e.id},r.a.createElement(re,{className:"mb-3",isDragging:h&&(c=w,o=[t,n],null!==c&&c[0]===o[0]&&c[1]===o[1]),collapse:h,title:e.title,footer:e.config,onMouseDown:function(e){return function(e,t){E(!0),N(t)}(0,[t,n])},onPositionChange:z},r.a.createElement(Ie,{id:e.id,edit:B,type:e.type,data:e.data,onChange:J})),h&&r.a.createElement(ce,{index:[t,n+1],position:k,onChange:H}));var c,o})))}))))))};!function(e){e[e.Login=0]="Login",e[e.Register=1]="Register",e[e.ConfirmSingUp=2]="ConfirmSingUp"}(we||(we={}));var Le=function(){var e=Object(a.useState)(we.Login),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),u=Object(l.a)(o,2),s=u[0],f=u[1],m=Object(a.useState)(""),d=Object(l.a)(m,2),b=d[0],p=d[1],v=Object(a.useState)(""),j=Object(l.a)(v,2),g=j[0],h=j[1],x=Object(a.useState)(!1),w=Object(l.a)(x,2),N=w[0],y=w[1],S=Object(a.useState)(""),k=Object(l.a)(S,2),C=k[0],I=k[1],P=Object(i.g)(),L=function(){var e=Object(O.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&g){e.next=2;break}return e.abrupt("return",alert("You haven't finished all the fields."));case 2:return y(!0),e.next=5,Y.signIn(s,g);case 5:t=e.sent,y(!1),t&&P.push("/");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(O.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&g&&b){e.next=2;break}return e.abrupt("return",alert("You haven't finished all the fields."));case 2:return y(!0),e.next=5,Y.signUp(s,g,b);case 5:if(t=e.sent,y(!1),t){e.next=9;break}return e.abrupt("return",alert("Sign-up failed, please try other username or try latter."));case 9:c(we.ConfirmSingUp);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(O.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return",alert("Please enter your verify code."));case 2:return y(!0),e.next=5,Y.confirmSignUp(s,C);case 5:t=e.sent,y(!1),t||alert("Confirmed failed. Please check if you have input the right code."),alert("You have confirmed your account."),c(we.Login),f(""),h("");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(e){switch(e.preventDefault(),n){case we.Login:return L();case we.Register:return U();case we.ConfirmSingUp:return R()}};return r.a.createElement("div",{className:"p-4"},r.a.createElement("form",{onSubmit:A},n!==we.ConfirmSingUp&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne,{className:"block w-full mb-4",type:"username",placeholder:"Username",value:s,onChange:function(e){return f(e.target.value)}}),r.a.createElement(Ne,{className:"block w-full mb-4",placeholder:"Password",type:"password",value:g,onChange:function(e){return h(e.target.value)}}),n===we.Register&&r.a.createElement(Ne,{className:"block w-full",placeholder:"Email",type:"email",value:b,onChange:function(e){return p(e.target.value)}})),n===we.ConfirmSingUp&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"font-hairline mb-8 text-2xl"},"Code has sent to your mailbox."),r.a.createElement(Ne,{className:"block w-full",placeholder:"Code",type:"text",value:C,onChange:function(e){return I(e.target.value)}})),r.a.createElement($,{type:"submit",className:"mt-10",primary:!0,block:!0,loading:N,onClick:A},n===we.ConfirmSingUp?"Confirmed":n===we.Login?"Sign in":"Sign up")),r.a.createElement("div",{className:"text-right mt-8 text-gray-600"},n===we.Login?r.a.createElement("div",null,"Haven't got an account?",r.a.createElement($,{onClick:function(){return c(we.Register)}},"Sign Up")):r.a.createElement("div",null,"Click here to",r.a.createElement($,{onClick:function(){return c(we.Login)}},"Sign In"))))},Ue=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"px-4 py-1"},r.a.createElement(X,null)),r.a.createElement("div",{className:"lg:w-1/3 md:w-1/2 w-11/12 mt-48 mx-auto shadow"},r.a.createElement(Le,null)))},Re=function(e){var t=e.className,n=void 0===t?"":t,a=e.children,c=["p-4 border border-red-300 bg-red-200 text-red-700 rounded",n].join(" ");return r.a.createElement("div",{className:c},a)},Ae=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),u=Object(l.a)(o,2),s=u[0],f=u[1],m=Object(a.useState)(!1),d=Object(l.a)(m,2),b=d[0],p=d[1],v=Object(a.useState)(""),j=Object(l.a)(v,2),g=j[0],h=j[1],E=Object(i.g)(),O=function(e){e.preventDefault(),n&&n.trim()&&(f(!0),function(e){return ge.pipe(Object(le.a)(1),Object(A.a)((function(t){return JSON.stringify({username:t,projectName:e})})),Object(A.a)((function(e){return{method:"POST",body:e}})),Object(S.a)((function(e){return je("projects",e)})),Object(se.a)(be))}(n).subscribe((function(e){if(f(!1),e instanceof I)return h(e.e.msg||"Create project failed!"),void p(!0);p(!1),h(""),E.push("/dashboard?projectId=".concat(e.id))})))};return r.a.createElement(q,null,r.a.createElement("div",null,r.a.createElement("h1",{className:"text-2xl border-b p-4"},"New project"),r.a.createElement("div",{className:"p-4"},b&&r.a.createElement(Re,{className:"mb-4"},g),r.a.createElement("form",{onSubmit:O},r.a.createElement("div",{className:"w-1/3"},r.a.createElement(Ne,{label:"Project name",placeholder:"Project name",value:n,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",{className:"flex items-center mt-8"},r.a.createElement($,{type:"submit",className:"mr-4",primary:!0,loading:s,onClick:O},"Create"),r.a.createElement($,{onClick:E.goBack},"Cancel"))))))},De=n(76);function Fe(){Object(a.useEffect)((function(){De.default.configure({Auth:{mandatorySignIn:!0,region:me.REGION,userPoolId:me.USER_POOL_ID,userPoolWebClientId:me.APP_CLIENT_ID}})}),[]);var e=G(),t=e.user,n=function(){return Boolean(t)};return e.loading?r.a.createElement("div",{className:"absolute w-full h-full"},r.a.createElement(p,null)):r.a.createElement(u.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/"},r.a.createElement(i.a,{to:"/dashboard"})),r.a.createElement(f,{guard:n,path:"/dashboard"},r.a.createElement(Pe,null)),r.a.createElement(f,{guard:n,path:"/new-project"},r.a.createElement(Ae,null)),r.a.createElement(i.b,{path:"/login"},r.a.createElement(Ue,null))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(222);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[136,1,2]]]);
//# sourceMappingURL=main.4529398b.chunk.js.map